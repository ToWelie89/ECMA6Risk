<div data-ng-init="attack.init()">
    <div id="attackModal" class="riskModal" role="dialog" data-backdrop="static">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="turnAvatarContainer">
                    <div class="turnAvatar" style="background-image: url({{ attack.attacker.avatar.picture }});">
                    </div>
                </div>
                <div class="turnAvatarContainer right">
                    <div class="turnAvatar" style="background-image: url({{ attack.defender.avatar.picture }});">
                    </div>
                </div>
                <div class="modal-body">
                    <div class="modal-body textCenter">
                        <div class="row">
                          <div class="col-xs-12" style="z-index: 10; margin-bottom: -30px;">
                              <h2 class="banner">Battle of {{ attack.defender.name }}</h2>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <svg id="territorySvg" viewBox="" xmlns="http://www.w3.org/2000/svg">
                                </svg>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6" id="attackerTroops">
                                <span data-ng-repeat="troop in attack.getAsArray(attack.attacker.numberOfTroops) track by $index" class="troop_{{ attack.attacker.color.name }}" data-ng-show="attack.attacker.numberOfTroops <= 20">
                                    <span class="troopIcon troop">
                                        @@troopSvg
                                    </span>
                                </span>
                                <span data-ng-show="attack.attacker.numberOfTroops > 20">
                                    <span class="troopIcon troop">
                                        @@troopSvg
                                    </span>
                                    <span>x{{attack.attacker.numberOfTroops}}</span>
                                </span>
                                <div data-ng-show="attack.attacker.numberOfTroops == 0 && !attack.diceAreRolling" class="deadLabel">
                                    <strong>DEAD!</strong>
                                </div>
                            </div>
                            <div class="col-xs-6" id="defenderTroops">
                                <span data-ng-repeat="troop in attack.getAsArray(attack.defender.numberOfTroops) track by $index" class="troop_{{ attack.defender.color.name }}" data-ng-show="attack.defender.numberOfTroops <= 20">
                                    <span class="troopIcon troop">
                                        @@troopSvg
                                    </span>
                                </span>
                                <span data-ng-show="attack.defender.numberOfTroops > 20">
                                    <span class="troopIcon troop">
                                        @@troopSvg
                                    </span>
                                    <span>x{{attack.defender.numberOfTroops}}</span>
                                </span>
                                <div data-ng-show="attack.defender.numberOfTroops == 0" class="deadLabel">
                                    <strong>DEAD!</strong>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <strong>Attacker</strong>
                            </div>
                            <div class="col-xs-6">
                                <strong>Defender</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6" data-ng-bind="attack.attacker.owner"></div>
                            <div class="col-xs-6" data-ng-bind="attack.defender.owner"></div>
                        </div>
                        <div class="row paddingTop paddingBottom" data-ng-hide="attack.fightIsOver || attack.diceAreRolling">
                            <button type="button" class="button button-blue" data-ng-click="attack.fight()" data-ng-disabled="attack.disableButtons">
                                <i class="fa fa-times"></i>
                                <strong>Fight!</strong>
                            </button>
                            <button type="button" class="button button-blue" data-ng-click="attack.retreat()" data-ng-disabled="attack.disableButtons">
                                <i class="fa fa-times"></i>
                                <strong>Retreat!</strong>
                            </button>
                        </div>
                        <div class="row" data-ng-show="attack.attackerDice.length > 0 || attack.defenderDice.length > 0">
                            <h2>Dice:</h2>
                        </div>
                        <div class="row">
                            <div class="col-xs-6" data-ng-if="attack.attackerDice">
                                <div id="attackerCanvas"></div>
                            </div>
                            <div class="col-xs-6" data-ng-if="attack.defenderDice">
                                <div id="defenderCanvas"></div>
                            </div>
                        </div>
                        <div class="row" data-ng-show="attack.showMoveTroops">
                            <div class="col-xs-12 marginTop">
                                <h4>
                                    Choose the number of troops to move the newly conquered territory.
                                </h4>
                            </div>
                            <div class="col-xs-12">
                                <rzslider rz-slider-model="attack.moveNumberOfTroops" rz-slider-options="attack.movementSliderOptions"></rzslider>
                            </div>
                            <div class="col-xs-12 paddingTop">
                                <button type="button" class="button button-blue" data-ng-click="attack.moveTroops()">
                                    <i class="fa fa-times"></i>
                                    <strong>Move troops</strong>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>